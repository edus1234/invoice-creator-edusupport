# 請求書自動作成システム

## プロジェクト概要
- **プロジェクト名**: 請求書自動作成システム
- **目標**: 時間入力から自動計算してPDF出力できる請求書管理システム
- **メイン機能**: 
  - 時間×時給の自動計算
  - 請求書の作成・編集・削除・一覧表示
  - PDFダウンロード機能
  - レスポンシブデザイン対応

## URL情報
- **開発サーバー**: https://3000-ig8o8l6emgtm4kj84zjm0-6532622b.e2b.dev
- **APIエンドポイント**: 
  - `/api/health` - ヘルスチェック
  - `/api/invoices` - 請求書一覧取得・作成
  - `/api/invoices/:id` - 請求書詳細取得・更新・削除

## 現在完了している機能
✅ **請求書管理機能**
- 請求書の新規作成（自動番号生成）
- 請求書の編集・更新
- 請求書の削除
- 請求書一覧表示

✅ **自動計算機能**
- 時間×時給の自動金額計算
- 消費税自動計算（税率設定可能）
- 小計・税込合計の自動更新

✅ **作業項目管理**
- 複数作業項目の追加・削除
- 作業日・内容・時間・時給の詳細入力
- 項目ごとの金額自動計算

✅ **PDF出力機能**
- jsPDFライブラリを使用したPDF生成
- 請求書フォーマットでの美しい出力
- ファイル名自動設定（請求書番号）

✅ **ユーザーインターフェース**
- モダンなレスポンシブデザイン
- TailwindCSSによるスタイリング
- モーダルベースの操作画面
- リアルタイム計算表示

## データ構造
### 請求書テーブル (invoices)
- 請求書番号（自動生成）
- 顧客情報（名前・住所）
- 請求日・支払期日
- 税率設定
- 合計金額（自動計算）
- 備考

### 請求書明細テーブル (invoice_items)
- 作業日
- 作業内容
- 時間数
- 時給
- 金額（時間×時給で自動計算）

### ストレージサービス
- **データベース**: Cloudflare D1 (SQLite)
- **データフロー**: フロントエンド → Hono API → D1データベース

## ユーザーガイド
### 1. 新規請求書作成
1. 「新規作成」ボタンをクリック
2. 顧客情報と基本情報を入力
3. 「項目追加」で作業項目を追加
4. 作業日・内容・時間・時給を入力（金額は自動計算）
5. 「作成」ボタンで保存

### 2. 請求書編集
1. 「請求書一覧」から編集したい請求書の編集ボタンをクリック
2. 必要な項目を修正
3. 「更新」ボタンで保存

### 3. PDF出力
1. 請求書詳細画面で「PDF ダウンロード」ボタンをクリック
2. ブラウザのダウンロードフォルダに保存される

### 4. 請求書削除
1. 「請求書一覧」から削除したい請求書の削除ボタンをクリック
2. 確認ダイアログで「OK」を選択

## 技術スタック
- **フレームワーク**: Hono (TypeScript)
- **データベース**: Cloudflare D1 (SQLite)
- **フロントエンド**: Vanilla JavaScript + TailwindCSS
- **PDF生成**: jsPDF
- **デプロイ**: Cloudflare Pages/Workers

## デプロイ情報
- **プラットフォーム**: Cloudflare Pages（開発環境）
- **ステータス**: ✅ アクティブ
- **最終更新**: 2025-09-29

## 今後の推奨開発項目
🔄 **本格デプロイ準備**
- Cloudflare APIキー設定
- 本番データベース作成
- Cloudflare Pagesへのデプロイ

🔄 **機能拡張**
- 請求書テンプレートのカスタマイズ
- 顧客マスターデータ管理
- 月次・年次の売上レポート機能
- メール送信機能（請求書自動送付）

🔄 **UI/UX改善**
- ダッシュボード画面の追加
- 請求書検索・フィルタリング機能
- 印刷用レイアウトの最適化
- ダークモード対応

## 開発コマンド
```bash
# ローカル開発サーバー起動
npm run dev:sandbox

# データベースリセット
npm run db:reset

# ビルド
npm run build

# PM2でのサーバー管理
pm2 start ecosystem.config.cjs
pm2 logs webapp --nostream
pm2 restart webapp
```